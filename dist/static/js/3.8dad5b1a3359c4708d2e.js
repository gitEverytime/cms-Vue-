webpackJsonp([3,4],{"0rY1":function(e,t,r){t=e.exports=r("XLS9")(!1),t.push([e.i,"",""])},"1QPC":function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"first-step-wrap"},[r("h3",[e._v("产品品类")]),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{staticClass:"choose",attrs:{label:""}},[r("el-radio",{attrs:{label:"1",disabled:e.$route.params.id>0},on:{change:function(t){e.resetFromValidate("ruleForm")}},model:{value:e.ruleForm.chooseCategory,callback:function(t){e.$set(e.ruleForm,"chooseCategory",t)},expression:"ruleForm.chooseCategory"}},[e._v("现有品类")]),e._v(" "),r("el-radio",{attrs:{label:"2",disabled:e.$route.params.id>0},on:{change:function(t){e.resetFromValidate("ruleForm")}},model:{value:e.ruleForm.chooseCategory,callback:function(t){e.$set(e.ruleForm,"chooseCategory",t)},expression:"ruleForm.chooseCategory"}},[e._v("新增品类")])],1),e._v(" "),"1"===e.ruleForm.chooseCategory?r("el-form-item",{attrs:{label:"产品品类",prop:"state4"}},[r("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"选择产品品类"},on:{select:e.handleSelect},model:{value:e.ruleForm.state4,callback:function(t){e.$set(e.ruleForm,"state4",t)},expression:"ruleForm.state4"}})],1):e._e(),e._v(" "),"2"===e.ruleForm.chooseCategory?r("el-form-item",{staticClass:"form-inline",attrs:{label:"新增品类",prop:"categoryName"}},[r("el-input",{staticClass:"w_percent22",attrs:{placeholder:"类目名称"},model:{value:e.ruleForm.categoryName,callback:function(t){e.$set(e.ruleForm,"categoryName",t)},expression:"ruleForm.categoryName"}})],1):e._e(),e._v(" "),"2"===e.ruleForm.chooseCategory?r("el-form-item",{staticClass:"form-inline mar_0",attrs:{prop:"categoryCode"}},[r("el-input",{staticClass:"w_percent22",attrs:{placeholder:"类目代码"},model:{value:e.ruleForm.categoryCode,callback:function(t){e.$set(e.ruleForm,"categoryCode",t)},expression:"ruleForm.categoryCode"}}),r("span",{staticClass:"prompt"},[e._v("注：类目代码：例如：AB，即两位大写英文字母")])],1):e._e(),e._v(" "),r("h3",[e._v("产品型号")]),e._v(" "),r("el-form-item",{staticClass:"choose",attrs:{label:""}},[r("el-radio",{attrs:{label:"2",disabled:e.$route.params.id>0},on:{change:function(t){e.resetFromValidate("ruleForm")}},model:{value:e.ruleForm.chooseModelType,callback:function(t){e.$set(e.ruleForm,"chooseModelType",t)},expression:"ruleForm.chooseModelType"}},[e._v("新增型号")])],1),e._v(" "),"1"===e.ruleForm.chooseModelType?r("el-form-item",{attrs:{label:"选择型号",prop:"state5"}},[r("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsyncModel,placeholder:"产品型号"},on:{select:e.handleSelectModel},model:{value:e.ruleForm.state5,callback:function(t){e.$set(e.ruleForm,"state5",t)},expression:"ruleForm.state5"}})],1):e._e(),e._v(" "),"2"===e.ruleForm.chooseModelType?r("el-form-item",{attrs:{label:"商品名称",prop:"productName"}},[r("el-input",{attrs:{placeholder:"输入商品名称"},model:{value:e.ruleForm.productName,callback:function(t){e.$set(e.ruleForm,"productName",t)},expression:"ruleForm.productName"}})],1):e._e(),e._v(" "),"2"===e.ruleForm.chooseModelType?r("el-form-item",{attrs:{label:"商品型号",prop:"modelCode"}},[r("el-input",{staticClass:"modelCode",attrs:{placeholder:"输入型号编码"},model:{value:e.ruleForm.modelCode,callback:function(t){e.$set(e.ruleForm,"modelCode",t)},expression:"ruleForm.modelCode"}}),r("span",{staticClass:"prompt"},[e._v("注：型号编码：例如：AB2/A12，即首字母大写，第二位填大写字母或者数字，第三位填数字")])],1):e._e(),e._v(" "),r("h3",[e._v("规格信息")]),e._v(" "),r("el-table",{attrs:{data:e.ruleForm.properties,width:"100%"}},[r("el-table-column",{attrs:{label:"规格名称",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form-item",{staticClass:"mar_l_0"},[r("el-input",{staticClass:"insertListText",attrs:{placeholder:"名称"},model:{value:t.row.propertyName,callback:function(r){e.$set(t.row,"propertyName",r)},expression:"scope.row.propertyName"}})],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"规格列表","min-width":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.propertiesValues,function(a,o){return r("div",{staticClass:"items-wrap"},[t.$index>0?r("i",{staticClass:"el-icon-remove delete-wrap",on:{click:function(r){e.deleteListWrapBtn(t.$index)}}}):e._e(),e._v(" "),r("div",{staticClass:"list-wrap"},[o>0?r("i",{staticClass:"el-icon-remove delete-list",on:{click:function(r){e.deleteListBtn(t.$index,o)}}}):e._e(),e._v(" "),r("el-form-item",{staticClass:"mar_l_0",attrs:{prop:"propertyListName"}},[r("el-input",{staticClass:"insertListText",attrs:{placeholder:"类别"},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})],1)],1),e._v(" "),r("div",{on:{click:function(r){e.uploadClickEvent(t.$index,o)}}},[t.row.showUploadradio?r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/mall/upload","on-success":e.handleAvatarSuccess,"show-file-list":!1}},[a.imageUrl?r("img",{staticClass:"avatar",attrs:{src:a.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):e._e()],1)])}),e._v(" "),r("div",{staticClass:"insert-wrap"},[r("el-button",{staticClass:"inserListtBtn",attrs:{type:"primary"},on:{click:function(r){e.insertClickEvent(t.$index,t.row)}}},[e._v("+")]),e._v(" "),r("el-checkbox",{model:{value:t.row.showUploadradio,callback:function(r){e.$set(t.row,"showUploadradio",r)},expression:"scope.row.showUploadradio"}},[e._v("配图")])],1)]}}])})],1),e._v(" "),r("div",{staticClass:"insertSpecBtn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.insertSpecEvent}},[e._v("新增规格")])],1),e._v(" "),r("el-form-item",{staticClass:"first-step-btns"},[r("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("下一步")])],1)],1)],1)},o=[]},"6hdp":function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"step1-wrap"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:10}},[r("h3",[e._v("产品信息")]),e._v(" "),r("el-form-item",{attrs:{label:"运费规则",prop:"temp"}},[r("el-select",{staticClass:"in_w",attrs:{placeholder:"选择运费模板"},model:{value:e.ruleForm.temp,callback:function(t){e.$set(e.ruleForm,"temp",t)},expression:"ruleForm.temp"}},e._l(e.options,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"排序数字",prop:"num"}},[r("el-input-number",{staticClass:"in_w",attrs:{min:0,max:9999},model:{value:e.ruleForm.num,callback:function(t){e.$set(e.ruleForm,"num",t)},expression:"ruleForm.num"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"产品标签",prop:"type"}},[r("el-checkbox-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[r("el-checkbox",{attrs:{label:"普通商品",name:"type"}}),e._v(" "),r("el-checkbox",{attrs:{label:"试卖商品",name:"type"}}),e._v(" "),r("el-checkbox",{attrs:{label:"宣传商品",name:"type"}}),r("br"),e._v(" "),r("el-checkbox",{attrs:{label:"特卖商品",name:"type"}}),e._v(" "),r("el-checkbox",{attrs:{label:"新型商品",name:"type"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"可见性",prop:"visible"}},[r("el-checkbox-group",{model:{value:e.ruleForm.visible,callback:function(t){e.$set(e.ruleForm,"visible",t)},expression:"ruleForm.visible"}},[r("el-checkbox",{attrs:{label:"B端可见",name:"visible"}}),e._v(" "),r("el-checkbox",{attrs:{label:"C端可见",name:"visible"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"产品特点",prop:"text"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"介绍产品特点"},model:{value:e.ruleForm.text,callback:function(t){e.$set(e.ruleForm,"text",t)},expression:"ruleForm.text"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:10}},[r("h3",[e._v("产品信息")]),e._v(" "),r("el-form-item",{staticClass:"market-wrap",attrs:{label:"市场最低销售价"}},[r("el-input",{staticClass:"in_w",attrs:{placeholder:"单位：元"},model:{value:e.ruleForm.market,callback:function(t){e.$set(e.ruleForm,"market",t)},expression:"ruleForm.market"}})],1),e._v(" "),r("el-form-item",{staticClass:"agent-wrap",attrs:{label:"代理商提货价"}},[r("el-input",{staticClass:"in_w",attrs:{placeholder:"单位：元"},model:{value:e.ruleForm.agent,callback:function(t){e.$set(e.ruleForm,"agent",t)},expression:"ruleForm.agent"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"开票系数"}},[r("el-input",{staticClass:"in_w",attrs:{placeholder:"0"},model:{value:e.ruleForm.ratio,callback:function(t){e.$set(e.ruleForm,"ratio",t)},expression:"ruleForm.ratio"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"物料计算",prop:"matter"}},[r("el-radio-group",{model:{value:e.ruleForm.matter,callback:function(t){e.$set(e.ruleForm,"matter",t)},expression:"ruleForm.matter"}},[r("el-radio",{attrs:{label:"是"}}),e._v(" "),r("el-radio",{attrs:{label:"否"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"兑换券",prop:"coin"}},[r("el-radio-group",{model:{value:e.ruleForm.coin,callback:function(t){e.$set(e.ruleForm,"coin",t)},expression:"ruleForm.coin"}},[r("el-radio",{attrs:{label:"是"}}),e._v(" "),r("el-radio",{attrs:{label:"否"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"自营产品",prop:"self"}},[r("el-radio-group",{model:{value:e.ruleForm.self,callback:function(t){e.$set(e.ruleForm,"self",t)},expression:"ruleForm.self"}},[r("el-radio",{attrs:{label:"是"}}),e._v(" "),r("el-radio",{attrs:{label:"否"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否上架",prop:"shelve"}},[r("el-radio-group",{model:{value:e.ruleForm.shelve,callback:function(t){e.$set(e.ruleForm,"shelve",t)},expression:"ruleForm.shelve"}},[r("el-radio",{attrs:{label:"是"}}),e._v(" "),r("el-radio",{attrs:{label:"否"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{staticClass:"btn",on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("返回上一步")]),e._v(" "),r("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("下一步")])],1)],1),e._v(" "),r("el-col",{attrs:{span:4}})],1)],1)],1)},o=[]},CicN:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"manageInsert-wrap"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("商品管理")]),e._v(" "),e.$route.params.id<1?r("el-breadcrumb-item",[e._v("新增商品")]):e._e(),e._v(" "),e.$route.params.id>0?r("el-breadcrumb-item",[e._v("编辑商品")]):e._e()],1),e._v(" "),r("el-row",{staticClass:"step-wrap"},[r("el-col",{attrs:{span:12}},[r("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[r("el-step",{attrs:{title:"基本信息"}}),e._v(" "),r("el-step",{attrs:{title:"产品详情"}}),e._v(" "),r("el-step",{attrs:{title:"规格详情"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}})],1),e._v(" "),this.$store.getters.getSteps.isStep?r("insert-step"):e._e(),e._v(" "),r("insert-step1",{directives:[{name:"show",rawName:"v-show",value:this.$store.getters.getSteps.isStep1,expression:"this.$store.getters.getSteps.isStep1"}],attrs:{active:e.active}}),e._v(" "),this.$store.getters.getSteps.isStep3?r("insert-step3"):e._e()],1)},o=[]},Dxdm:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("Xxa5"),i=a(o),s=r("exGp"),l=a(s);t.default={data:function(){return{ruleForm:{text1:"",text2:""},rules:{text1:[{required:!0,message:"请填写产品信息",trigger:"blur"}],text2:[{required:!0,message:"请填写定价与配置信息",trigger:"blur"}]},dialogImageUrl:"",dialogVisible:!1}},methods:{handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url},submitForm:function(e){this.formLoad(e)},formLoad:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.checked=!1,t.fetchFormData()})},fetchFormData:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(i.default.mark(function e(){var t,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,r=t.ruleForm,t.$store.dispatch("setActive",2),a={isStep1:!1,isStep2:!1,isStep3:!0},t.$emit("listenStepsNext",a);case 5:case"end":return e.stop()}},e,this)}));return e}(),resetForm:function(e){var t={isStep1:!0,isStep2:!1,isStep3:!1};this.$emit("listenStepsPrev",t)}}}},Ia6c:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("xUe8"),o=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);var s=r("6hdp"),l=r("qs7J"),n=Object(l.a)(o.a,s.a,s.b,!1,null,null,null);t.default=n.exports},Jyq2:function(e,t,r){var a=r("0rY1");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=r("A/DJ").default;o("4231ccd5",a,!0,{})},MdqT:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("mvHQ"),i=a(o),s=r("Xxa5"),l=a(s),n=r("exGp"),u=a(n);t.default={data:function(){return{radio:"1",imageUrl:"",ruleForm:{chooseCategory:"1",chooseModelType:"2",chooseIntelligent:"1",categoryName:"",categoryCode:"",state4:"",state5:"",productName:"",modelCode:"",properties:[{propertiesValues:[{value:"",imageUrl:"",id:null}],showUploadradio:!1,propertyName:"",id:null}]},rules:{state4:[{required:!0,message:"请选择产品品类",trigger:"change"}],categoryName:[{required:!0,message:"请填写类目名称",trigger:"change"}],categoryCode:[{required:!0,message:"请填写类目代码",trigger:"change"}],state5:[{required:!0,message:"请选择产品型号",trigger:"change"}],productName:[{required:!0,message:"请填写商品名称",trigger:"change"}],modelCode:[{required:!0,message:"请填写型号编码",trigger:"change"}]},properties:[{propertiesValues:[{value:"",imageUrl:""}],showUploadradio:!1,propertyName:""}],file:"",key:"",index:"",productLists:[],restaurants:[],modelLists:[],state4:"",state5:"",timeout:null,categoryData:{},modelData:{},ids:{},disabled:!1,id:null,categoryModelId:null,intelligent:null,intelligentType:null,changeStatus:!1,olderData:{},oldProperties:[],intelligentArray:[],oid:null}},mounted:function(){var e=this;e.fetchBaseAllData(),e.$route.params.id>0&&(e.oid=e.$route.params.id),e.$store.getters.getStep1Backfill&&(e.oid=e.$store.getters.getIds.productId),e.oid&&e.fetchEditStep1Data(e.oid)},watch:{ruleForm:{deep:!0,handler:function(e,t){this.isEqual.o2o(e,this.olderData)?this.changeStatus=!1:this.changeStatus=!0}}},methods:{fetchBaseAllData:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(){var t,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,r={},e.next=4,t.http.get(this.api.commodityManageApi.baseAll,r);case 4:a=e.sent,a&&a.data&&200===a.data.code&&(o=a.data.data.list,o.forEach(function(e){t.restaurants.push({value:e.name,code:e.code,id:e.id})}));case 6:case"end":return e.stop()}},e,this)}));return e}(),fetchEditStep1Data:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(t){var r,a,o,i,s,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,r.disabled=!0,a={level:1,id:t},e.next=5,r.http.get(this.api.commodityManageApi.edit,a);case 5:o=e.sent,o&&o.data&&200===o.data.code&&(i=o.data.data.product,s=o.data.data.properties,r.id=i.id,r.categoryModelId=i.categoryModelId,r.ruleForm.state4=i.basicCategory.name,r.categoryData={id:i.categoryId,code:i.basicCategory.code,value:i.basicCategory.name},r.ruleForm.productName=i.basicCategoryModel.name,r.ruleForm.modelCode=i.categoryModelCode,r.ruleForm.properties.pop(),s.forEach(function(e,t){var a=e.propertiesValues,o=[],i=!1;i=1!==e.displayFormat,a.forEach(function(e,t){o.push({value:e.value,imageUrl:e.imageUrl,id:e.id})}),r.ruleForm.properties.push({propertiesValues:o,showUploadradio:i,propertyName:e.propertyName,id:e.id})}),n={productId:i.id,modelId:i.categoryModelId},r.$store.dispatch("setIds",n),r.olderData=r.isEqual.deepCopy(r.ruleForm));case 7:case"end":return e.stop()}},e,this)}));return e}(),submitForm:function(e){this.formLoad(e)},formLoad:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.checked=!1,t.changeStatus?t.postProductUpdateData():t.changeSteps()})},postProductUpdateData:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(){var t,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,r={},r.id=t.id,r.categoryModelId=t.categoryModelId,"1"===t.ruleForm.chooseCategory?(r.categoryCreate=!1,r.categoryId=t.categoryData.id,r.categoryCode=t.categoryData.code,r.categoryName=t.categoryData.value):(r.categoryCreate=!0,r.categoryId="",r.categoryCode=t.ruleForm.categoryCode,r.categoryName=t.ruleForm.categoryName),r.categoryModelCode=t.ruleForm.modelCode,r.categoryModelName=t.ruleForm.productName,t.intelligentArray=t.ruleForm.properties.slice(),r.properties=(0,i.default)(t.intelligentArray),r.level=1,r.userId=t.$store.getters.getUserList.id,e.next=13,t.http.post(this.api.commodityManageApi.productUpdate,r);case 13:a=e.sent,a&&a.data&&200===a.data.code&&(o={productId:a.data.data.productId,modelId:a.data.data.modelId},t.id=a.data.data.productId,t.categoryModelId=a.data.data.modelId,t.$store.dispatch("setIds",o),this.$route.params.id>0?this.$message.success("更新成功！"):this.$message.success("新增成功！"),t.changeSteps());case 15:case"end":return e.stop()}},e,this)}));return e}(),changeSteps:function(){var e=this,t={isStep:!1,isStep1:!0};e.$store.dispatch("setActive",1),e.$store.dispatch("setSteps",t)},uploadClickEvent:function(e,t){this.key=e,this.index=t},handleAvatarSuccess:function(e,t){this.ruleForm.properties[this.key].propertiesValues[this.index].imageUrl=e.data.url},insertClickEvent:function(e,t){this.ruleForm.properties[e].propertiesValues.push({value:"",imageUrl:"",id:null})},deleteListBtn:function(e,t){this.ruleForm.properties[e].propertiesValues.length>0&&this.ruleForm.properties[e].propertiesValues.splice(t,1)},deleteListWrapBtn:function(e){this.ruleForm.properties.length>0&&this.ruleForm.properties.splice(e,1)},insertSpecEvent:function(){this.ruleForm.properties.push({propertiesValues:[{value:"",imageUrl:"",id:null}],propertyName:"",showUploadradio:"",id:null})},resetFromValidate:function(e){this.$refs[e].resetFields()},resetForm:function(e){this.$refs[e].resetFields()},querySearchAsync:function(e,t){var r=this.restaurants;this.queryFunc(r,e,t)},querySearchAsyncModel:function(e,t){var r=this.modelLists;this.queryFunc(r,e,t)},queryFunc:function(e,t,r){var a=t?e.filter(this.createStateFilter(t)):e;clearTimeout(this.timeout),this.timeout=setTimeout(function(){r(a)},1e3*Math.random())},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.categoryData=e},handleSelectModel:function(e){this.modelData=e}}}},RKxn:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Dxdm"),o=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);var s=r("tP6s"),l=r("qs7J"),n=Object(l.a)(o.a,s.a,s.b,!1,null,null,null);t.default=n.exports},RZod:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("S+Vv"),o=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);var s=r("CicN"),l=r("qs7J"),n=Object(l.a)(o.a,s.a,s.b,!1,null,null,null);t.default=n.exports},"S+Vv":function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("UupP"),i=a(o),s=r("Ia6c"),l=a(s),n=r("RKxn"),u=(a(n),r("qU9G")),c=a(u);t.default={data:function(){return{}},mounted:function(){this.$store.dispatch("setSteps",{isStep:!0,isStep1:!1,isStep3:!1}),this.$store.dispatch("setActive",0)},computed:{active:function(){return this.$store.getters.getActive}},methods:{},components:{insertStep:i.default,insertStep1:l.default,insertStep3:c.default}}},SldL:function(e,t){!function(t){"use strict";function r(e,t,r,a){var i=t&&t.prototype instanceof o?t:o,s=Object.create(i.prototype),l=new m(a||[]);return s._invoke=u(e,r,l),s}function a(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function o(){}function i(){}function s(){}function l(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function n(e){function t(r,o,i,s){var l=a(e[r],e,o);if("throw"!==l.type){var n=l.arg,u=n.value;return u&&"object"==typeof u&&y.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,i,s)},function(e){t("throw",e,i,s)}):Promise.resolve(u).then(function(e){n.value=e,i(n)},s)}s(l.arg)}function r(e,r){function a(){return new Promise(function(a,o){t(e,r,a,o)})}return o=o?o.then(a,a):a()}var o;this._invoke=r}function u(e,t,r){var o=k;return function(i,s){if(o===S)throw new Error("Generator is already running");if(o===M){if("throw"===i)throw s;return h()}for(r.method=i,r.arg=s;;){var l=r.delegate;if(l){var n=c(l,r);if(n){if(n===L)continue;return n}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===k)throw o=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=S;var u=a(e,t,r);if("normal"===u.type){if(o=r.done?M:$,u.arg===L)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=M,r.method="throw",r.arg=u.arg)}}}function c(e,t){var r=e.iterator[t.method];if(r===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,c(e,t),"throw"===t.method))return L;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return L}var o=a(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,L;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,L):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,L)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function m(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function f(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(y.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=v,t.done=!0,t};return a.next=a}}return{next:h}}function h(){return{value:v,done:!0}}var v,g=Object.prototype,y=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",F=b.asyncIterator||"@@asyncIterator",x=b.toStringTag||"@@toStringTag",w="object"==typeof e,C=t.regeneratorRuntime;if(C)return void(w&&(e.exports=C));C=t.regeneratorRuntime=w?e.exports:{},C.wrap=r;var k="suspendedStart",$="suspendedYield",S="executing",M="completed",L={},P={};P[_]=function(){return this};var D=Object.getPrototypeOf,E=D&&D(D(f([])));E&&E!==g&&y.call(E,_)&&(P=E);var I=s.prototype=o.prototype=Object.create(P);i.prototype=I.constructor=s,s.constructor=i,s[x]=i.displayName="GeneratorFunction",C.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,x in e||(e[x]="GeneratorFunction")),e.prototype=Object.create(I),e},C.awrap=function(e){return{__await:e}},l(n.prototype),n.prototype[F]=function(){return this},C.AsyncIterator=n,C.async=function(e,t,a,o){var i=new n(r(e,t,a,o));return C.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},l(I),I[x]="Generator",I[_]=function(){return this},I.toString=function(){return"[object Generator]"},C.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var a=t.pop();if(a in e)return r.value=a,r.done=!1,r}return r.done=!0,r}},C.values=f,m.prototype={constructor:m,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,a){return i.type="throw",i.arg=e,r.next=t,a&&(r.method="next",r.arg=v),!!a}if(this.done)throw e;for(var r=this,a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var s=y.call(o,"catchLoc"),l=y.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&y.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,L):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),L},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),p(r),L}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var o=a.arg;p(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:f(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=v),L}}}(function(){return this}()||Function("return this")())},UupP:function(e,t,r){"use strict";function a(e){r("Jyq2")}Object.defineProperty(t,"__esModule",{value:!0});var o=r("MdqT"),i=r.n(o);for(var s in o)"default"!==s&&function(e){r.d(t,e,function(){return o[e]})}(s);var l=r("1QPC"),n=r("qs7J"),u=a,c=Object(n.a)(i.a,l.a,l.b,!1,u,null,null);t.default=c.exports},Xxa5:function(e,t,r){e.exports=r("jyFz")},e1Ol:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("Xxa5"),i=a(o),s=r("exGp"),l=a(s);t.default={data:function(){return{imageUrl:"",formats:[],properties:[],options:[{value:"件",label:"件"},{value:"个",label:"个"},{value:"平方米",label:"平方米"},{value:"卷",label:"卷"}],rules:{stock:[{required:!0,message:"请填写预留库存"},{type:"number",message:"预留库存必须为数字值"}],price:[{required:!0,type:"number",message:"请填写市场价"},{type:"number",message:"市场价必须为数字值"}],unit:[{required:!0,message:"请选择单位",trigger:"change"}],productPurchasePrice:[{required:!0,type:"number",message:"请填写进货价"},{type:"number",message:"进货价必须为数字值"}]},tableData5Length:Number,dialogFormVisible:!1,value:"",form:{level:3,stock:"",price:"",unit:"",areaMoney:"",productPurchasePrice:"",id:0},formLabelWidth:"120px",index:""}},mounted:function(){this.fetchProductEditData()},methods:{fetchProductEditData:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(i.default.mark(function e(){var t,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,r={level:3,id:t.$store.getters.getIds.productId},e.next=4,t.http.get(this.api.commodityManageApi.productEdit,r);case 4:a=e.sent,a&&a.data&&200===a.data.code&&(t.formats=a.data.data.formats,t.properties=a.data.data.properties);case 6:case"end":return e.stop()}},e,this)}));return e}(),submitForm:function(e){this.formLoad(e)},formLoad:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.checked=!1,t.postProductStep3Data()})},postProductStep3Data:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(i.default.mark(function e(){var t,r,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,r=t.form,e.next=4,t.http.post(this.api.commodityManageApi.productUpdate,r);case 4:a=e.sent,a&&a.data&&200===a.data.code&&(this.dialogFormVisible=!1,t.fetchProductEditData(),t.$message.success("更新成功！"));case 6:case"end":return e.stop()}},e,this)}));return e}(),resetForm:function(){var e=this,t={isStep1:!0,isStep3:!1};e.$store.dispatch("setActive",1),e.$store.dispatch("setSteps",t)},uploadClickEvent:function(e){this.index=e},updateEventBtn:function(e){this.dialogFormVisible=!0,this.form.id=e.id,this.form.stock=e.stock,this.form.price=e.price,this.form.productPurchasePrice=e.productPurchasePrice,this.form.unit=e.unit,this.form.areaMoney=e.areaMoney},handleAvatarSuccess:function(e,t){this.formats[this.index].picUrl=e.data.url}}}},exGp:function(e,t,r){"use strict";t.__esModule=!0;var a=r("//Fk"),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=function(e){return function(){var t=e.apply(this,arguments);return new o.default(function(e,r){function a(i,s){try{var l=t[i](s),n=l.value}catch(e){return void r(e)}if(!l.done)return o.default.resolve(n).then(function(e){a("next",e)},function(e){a("throw",e)});e(n)}return a("next")})}}},jyFz:function(e,t,r){var a=function(){return this}()||Function("return this")(),o=a.regeneratorRuntime&&Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime")>=0,i=o&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,e.exports=r("SldL"),o)a.regeneratorRuntime=i;else try{delete a.regeneratorRuntime}catch(e){a.regeneratorRuntime=void 0}},ky20:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"step3-wrap"},[r("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("h3",[e._v("规格信息")]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.formats,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"序号",type:"index","min-width":"5%"}}),e._v(" "),r("el-table-column",{attrs:{label:"缩略图","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{on:{click:function(r){e.uploadClickEvent(t.$index)}}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/mall/product/upload",data:{productId:e.$store.getters.getIds.productId,formatId:t.row.id,type:2},"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[t.row.picUrl?r("img",{staticClass:"avatar",attrs:{src:t.row.picUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"产品编号","min-width":"20%",prop:"categoryModelFormatNumber"}}),e._v(" "),e._l(e.properties,function(t,a){return r("el-table-column",{attrs:{label:t.propertyName,"min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.propertiesValues[a].value)+"\n            ")]}}])})}),e._v(" "),r("el-table-column",{attrs:{label:"操作","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){e.updateEventBtn(t.row)}}},[e._v("操作")])]}}])})],2),e._v(" "),r("el-form-item",{staticClass:"step3-btns"},[r("el-button",{staticClass:"btn",on:{click:e.resetForm}},[e._v("返回上一步")])],1)],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"规格配置",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"预留库存","label-width":e.formLabelWidth,prop:"stock"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"预留库存数"},model:{value:e.form.stock,callback:function(t){e.$set(e.form,"stock",e._n(t))},expression:"form.stock"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"市场价","label-width":e.formLabelWidth,prop:"price"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"单位：元"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",e._n(t))},expression:"form.price"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单位",prop:"unit"}},[r("el-select",{attrs:{placeholder:"请选择单位"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}},e._l(e.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"区域金额","label-width":e.formLabelWidth,prop:"areaMoney"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"单位：元"},model:{value:e.form.areaMoney,callback:function(t){e.$set(e.form,"areaMoney",e._n(t))},expression:"form.areaMoney"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"进货价","label-width":e.formLabelWidth,prop:"productPurchasePrice"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"单位：元"},model:{value:e.form.productPurchasePrice,callback:function(t){e.$set(e.form,"productPurchasePrice",e._n(t))},expression:"form.productPurchasePrice"}})],1),e._v(" "),r("el-form-item",{staticClass:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)],1)],1)},o=[]},qU9G:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("e1Ol"),o=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);var s=r("ky20"),l=r("qs7J"),n=Object(l.a)(o.a,s.a,s.b,!1,null,null,null);t.default=n.exports},tP6s:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"step2-wrap"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:20}},[r("div",{staticClass:"step2-title"},[r("h3",[e._v("App图片设置")])]),e._v(" "),r("el-upload",{staticClass:"fileLoad-wrap",attrs:{action:"/api/mall/upload","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),r("el-col",{attrs:{span:4}})],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:10}},[r("h3",[e._v("产品信息")]),e._v(" "),r("el-form-item",{attrs:{prop:"text1"}},[r("quill-editor",{staticClass:"editor",model:{value:e.ruleForm.text1,callback:function(t){e.$set(e.ruleForm,"text1",t)},expression:"ruleForm.text1"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:10}},[r("h3",[e._v("定价与配置")]),e._v(" "),r("el-form-item",{attrs:{prop:"text2"}},[r("quill-editor",{staticClass:"editor",model:{value:e.ruleForm.text2,callback:function(t){e.$set(e.ruleForm,"text2",t)},expression:"ruleForm.text2"}})],1),e._v(" "),r("el-form-item",{staticClass:"btn-wrap"},[r("el-button",{staticClass:"btn",on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("返回上一步")]),e._v(" "),r("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("下一步")])],1)],1),e._v(" "),r("el-col",{attrs:{span:4}})],1)],1)],1)},o=[]},xUe8:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r("mvHQ"),i=a(o),s=r("Xxa5"),l=a(s),n=r("exGp"),u=a(n);t.default={data:function(){return{ruleForm:{temp:1,num:"",type:["普通商品"],visible:[],text:"",market:"",agent:"",ratio:"",matter:"否",coin:"",self:"是",shelve:""},rules:{temp:[{required:!0,type:"number",message:"请选择运费模板",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个产品标签",trigger:"change"}],visible:[{type:"array",required:!0,message:"请至少选择一个可见性",trigger:"change"}],matter:[{required:!0,message:"请选择是否要物料计算",trigger:"change"}],coin:[{required:!0,message:"请选择是否要使用兑换券",trigger:"change"}],self:[{required:!0,message:"请选择是否是自营产品",trigger:"change"}],shelve:[{required:!0,message:"请选择是否要上架",trigger:"change"}]},productData:{},tags:[],price:0,templates:[],options:[],id:"",categoryModelId:"",olderRuleForm:{},changeStatus:!1}},mounted:function(){this.$route.params.id>0&&this.fetchEditData(),this.fetchTemplateListData()},watch:{ruleForm:{deep:!0,handler:function(e,t){this.isEqual.o2o(e,this.olderRuleForm)?this.changeStatus=!1:this.changeStatus=!0}}},methods:{submitForm:function(e){this.formLoad(e)},formLoad:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.checked=!1,t.postProductLevelData()})},fetchEditData:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(){var t,r,a,o,i,s,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,r={level:2,id:this.$route.params.id},e.next=4,t.http.get(this.api.commodityManageApi.edit,r);case 4:a=e.sent,a&&a.data&&200===a.data.code&&(o="",i="",s="",n="",t.productData=a.data.data.product,t.id=t.productData.id,t.categoryModelId=t.productData.categoryModelId,t.tags=a.data.data.tags,t.price=a.data.data.price,o=1===t.productData.isMaterialCalculate?"是":"否",i=1===t.productData.specialType?"是":"否",s=1===t.productData.isCompanyProduct?"是":"否",n=1===t.productData.status?"是":"否",t.templates.forEach(function(e,r){t.options.push({value:e.name,label:r})}),t.ruleForm={temp:t.productData.freightTemplateId,num:t.productData.sort,type:t.tags,text:t.productData.feature,market:t.price,agent:t.productData.productPurchasePrice,ratio:t.productData.billingCoefficient,visible:[],matter:o,coin:i,self:s,shelve:n},1===t.productData.cDisplay&&t.ruleForm.visible.push("C端可见"),1===t.productData.bDisplay&&t.ruleForm.visible.push("B端可见"),t.olderRuleForm=t.isEqual.deepCopy(t.ruleForm));case 6:case"end":return e.stop()}},e,this)}));return e}(),fetchTemplateListData:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(){var t,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,r={},e.next=4,t.http.get(this.api.commodityManageApi.templateList,r);case 4:a=e.sent,a&&a.data&&200===a.data.code&&(t.options=a.data.data.templates);case 6:case"end":return e.stop()}},e,this)}));return e}(),postProductLevelData:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(l.default.mark(function e(){var t,r,a,o,s,n,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,r="",a="",o=(0,i.default)(t.ruleForm.type),r=t.$route.params.id>0?t.id:t.$store.getters.getIds.productId,a=t.$route.params.id>0?t.categoryModelId:t.$store.getters.getIds.modelId,s={freightTemplateId:t.ruleForm.temp,sort:t.ruleForm.num,tagNames:o,feature:t.ruleForm.text,price:t.ruleForm.market,bDisplay:0,cDisplay:0,productPurchasePrice:t.ruleForm.agent,billingCoefficient:t.ruleForm.ratio,id:r,categoryModelId:a,level:2},n=t.ruleForm.visible,""!==n&&n.forEach(function(e){"B端可见"===e&&(s.bDisplay=1),"C端可见"===e&&(s.cDisplay=1)}),"是"===t.ruleForm.matter?s.isMaterialCalculate=1:s.isMaterialCalculate=0,"是"===t.ruleForm.coin?s.specialType=1:s.specialType=0,"是"===t.ruleForm.self?s.isCompanyProduct=1:s.isCompanyProduct=0,"是"===t.ruleForm.shelve?s.status=1:s.status=-1,e.next=15,t.http.post(this.api.commodityManageApi.productUpdate,s);case 15:u=e.sent,u&&u.data&&200===u.data.code&&(this.$route.params.id>0?this.$message.success("更新成功！"):this.$message.success("新增成功！"),t.changeSteps());case 17:case"end":return e.stop()}},e,this)}));return e}(),changeSteps:function(){var e=this,t={isStep1:!1,isStep3:!0};e.$store.dispatch("setActive",2),e.$store.dispatch("setSteps",t)},resetForm:function(e){var t=this,r={isStep:!0,isStep1:!1};t.$store.dispatch("setActive",0),t.$store.dispatch("setSteps",r),t.$store.dispatch("setStep1Backfill",!0)}}}}});